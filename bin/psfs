#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import os, argparse
import psfs

if __name__ == "__main__":

    # argument parse
    p = argparse.ArgumentParser()

    p.add_argument(
        "input",
        help=r"JSON file"
    )

    p.add_argument(
        "--output", "-o",
        default=None,
        help=r"image file"
    )

    p.add_argument(
        "--encoding", "-e",
        default="utf8",
        help=r"encoding"
    )

    p.add_argument(
        "--title", "-t",
        action="store_true", default=False,
        help=r"make default titles"
    )

    p.add_argument(
        "--noylab", "-y",
        action="store_true", default=False,
        help=r"hide ylabs"
    )

    args = p.parse_args()

    # 実行
    fs = psfs.Prop(args.input, args.encoding)

    if args.title:
        fs.bstitle = "B/S"
        fs.pltitle = "P/L"

    if args.noylab:
        fs.noylab = True

    fs.prepare()

    if args.output:
        fs.savefig(args.output)
    else:
        fs.show()
        input("Press ENTER")
